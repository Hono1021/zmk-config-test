#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/mouse.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>

/ {
    keymap {
        compatible = "zmk,keymap";
        default_layer {
            bindings = <
                &bt BT_SEL 0    &kp B    &kp C    &kp D   &kp E
                &kp F           &kp G    &kp H    &kp I   &kp J
                &kp K           &kp L    &kp N    &kp M   &kp O
                &mkp LCLK       &kp Q                     &kp R
            >;
        };
    };

    trackball_mmv_ibl {
        compatible = "zmk,input-behavior-listener";
        device = <&trackball_v>;
        layers = <0>;
        evt-type = <INPUT_EV_REL>;
        x-input-code = <INPUT_REL_X>;
        y-input-code = <INPUT_REL_Y>;
        // bindings = <&ib_tog_layer MSK>;
        // bindings = <&ib_fwd_to_hid_io>;
    };
    trackball_msl_ibl {
        compatible = "zmk,input-behavior-listener";
        device = <&trackball_v>;
        layers = <1>;
        evt-type = <INPUT_EV_REL>;
        x-input-code = <INPUT_REL_MISC>;
        y-input-code = <INPUT_REL_WHEEL>;
        y-invert;
        bindings = <&ib_wheel_scaler 1 25>;
    };

    ib_wheel_scaler: ib_wheel_scaler {
        compatible = "zmk,input-behavior-scaler";
        #binding-cells = <2>;
        evt-type = <INPUT_EV_REL>;
        input-code = <INPUT_REL_WHEEL>;
    };

};